# 주일학교 출석/학생관리 시스템 PRD v1

## 1. 목표
- 주일학교 운영의 핵심인 주 단위(일요일) 출석을 정확하고 빠르게 관리한다.
- 학생 정보와 교사 정보를 한 곳에서 관리한다.
- 출석과 연계된 달란트(포인트) 지급을 간편화한다.
- 대시보드에서 운영 핵심 지표를 즉시 확인한다.

## 2. 사용자 역할
- 사용자: 교사만 사용
- 권한: 2단계 권한(관리자 교사, 일반 교사)
- 관리자 교사는 Google 로그인한 교사의 가입 승인/거절을 처리한다.

## 3. 데이터 모델(초안)

### Student
- 이름
- 성별
- 생년월일
- 집 주소
- 학생 연락처(선택)
- 누적 달란트(캐시)

### ParentContact (Student 종속, 1:1)
- 보호자 이름
- 관계
- 연락처

### Teacher
- 이메일(고유)
- 이름
- 연락처
- 생년월일
- 담당학년
- 권한(ADMIN/TEACHER)
- 승인 상태(PENDING/APPROVED/REJECTED)
- 재직 상태(활성/비활성)

### Attendance
- 출석 일자(주 단위, 일요일 기준)
- 학생 ID
- 출석 상태: 출석, 결석

### TalentTransaction (Student 종속)
- 일자
- 학생 ID
- 증감 값(+/-)

## 4. 핵심 기능/페이지

### 로그인 페이지
- 첫 진입 시 로그인 페이지를 노출한다.
- Google 로그인을 완료한 사용자만 서비스 접근이 가능하다.

### 대시보드
- 오늘/이번 주 출석 인원
- 최근 4주 출석 추이
- 분기별 생일 대상자 목록

### 학생 관리 페이지
- 학생 등록/수정/삭제
- 학생 기본정보 관리(이름, 성별, 생년월일, 집 주소, 연락처)
- 보호자 정보 관리(학생당 1명)
- 학생별 누적 달란트/출석 요약

### 출석 및 달란트 페이지
- 일요일 단위 출석 일괄 체크
- 출석 상태 입력(출석/결석)
- 출석 저장 후 달란트 지급/차감
- 달란트 증감 로그 조회(날짜, 증감값)

### 교사 정보 페이지
- 교사 등록/수정/삭제
- 교사 정보 관리(이름, 연락처, 생년월일, 담당학년, 재직 상태)

### 교사 승인 관리 페이지(관리자 전용)
- Google 로그인으로 유입된 교사 계정을 승인/거절한다.
- 일반 교사에게는 페이지를 노출하지 않는다.
- 승인 대기 목록과 승인 처리 결과를 확인할 수 있다.

### 접근 제어
- 로그인하지 않은 사용자가 임의 URL로 접근하면 로그인 페이지로 리다이렉트한다.
- 관리자 전용 페이지는 관리자 교사만 접근 가능하다.

## 5. 기술 스택(초안)
- 프레임워크: Next.js(App Router)
- 배포: Vercel
- 인증: Auth.js + Google OAuth
- DB: Neon Postgres
- ORM: Prisma
- 서버 상태 관리: TanStack Query(React Query)
- 전역 상태 관리: Zustand
- 스타일: Tailwind CSS
- 유효성 검증: Zod

## 6. 일정(4일 x 6시간)
- Day 1: 프로젝트 세팅, Google 로그인, DB 스키마/마이그레이션, 기본 레이아웃
- Day 2: 학생/교사 CRUD 구현
- Day 3: 출석 입력, 달란트 지급/차감, 로그 조회
- Day 4: 대시보드, QA, 배포 및 운영 점검

## 7. 확정 사항
- 출석 상태는 출석/결석 2가지만 사용
- 보호자 연락처는 학생당 1개
- 학생 테이블에 성별 컬럼 추가
- 교사 권한은 관리자/일반 교사 2단계로 운영
- 가입 승인 페이지는 관리자 교사에게만 노출
